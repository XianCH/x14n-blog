<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>redi常用命令总结 | x14n</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="stylesheet" href="/x14n-blog/styles/custom.css">
    <meta name="description" content="STAY HUNGER,STAY FOOLISH">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/x14n-blog/assets/css/0.styles.c5be36f0.css" as="style"><link rel="preload" href="/x14n-blog/assets/js/app.0bf6b832.js" as="script"><link rel="preload" href="/x14n-blog/assets/js/7.5ae92d3c.js" as="script"><link rel="preload" href="/x14n-blog/assets/js/2.f34688e4.js" as="script"><link rel="preload" href="/x14n-blog/assets/js/1.8dfff511.js" as="script"><link rel="preload" href="/x14n-blog/assets/js/80.a1c43ff4.js" as="script"><link rel="prefetch" href="/x14n-blog/assets/js/10.80b19368.js"><link rel="prefetch" href="/x14n-blog/assets/js/11.eca95232.js"><link rel="prefetch" href="/x14n-blog/assets/js/14.65ec719e.js"><link rel="prefetch" href="/x14n-blog/assets/js/15.55722028.js"><link rel="prefetch" href="/x14n-blog/assets/js/16.11e89e57.js"><link rel="prefetch" href="/x14n-blog/assets/js/17.072265ce.js"><link rel="prefetch" href="/x14n-blog/assets/js/18.9264737b.js"><link rel="prefetch" href="/x14n-blog/assets/js/19.68ab4bad.js"><link rel="prefetch" href="/x14n-blog/assets/js/20.6cd93213.js"><link rel="prefetch" href="/x14n-blog/assets/js/21.b972a304.js"><link rel="prefetch" href="/x14n-blog/assets/js/22.bb58b275.js"><link rel="prefetch" href="/x14n-blog/assets/js/23.f4963f8f.js"><link rel="prefetch" href="/x14n-blog/assets/js/24.1d11efd9.js"><link rel="prefetch" href="/x14n-blog/assets/js/25.546aba52.js"><link rel="prefetch" href="/x14n-blog/assets/js/26.dfc21ea4.js"><link rel="prefetch" href="/x14n-blog/assets/js/27.5a57dd7f.js"><link rel="prefetch" href="/x14n-blog/assets/js/28.3f595efb.js"><link rel="prefetch" href="/x14n-blog/assets/js/29.69202bc7.js"><link rel="prefetch" href="/x14n-blog/assets/js/3.0854eb75.js"><link rel="prefetch" href="/x14n-blog/assets/js/30.e344efe0.js"><link rel="prefetch" href="/x14n-blog/assets/js/31.49ac6ce7.js"><link rel="prefetch" href="/x14n-blog/assets/js/32.71f0bab9.js"><link rel="prefetch" href="/x14n-blog/assets/js/33.720bfc4b.js"><link rel="prefetch" href="/x14n-blog/assets/js/34.9529d302.js"><link rel="prefetch" href="/x14n-blog/assets/js/35.c8ef20b8.js"><link rel="prefetch" href="/x14n-blog/assets/js/36.4604d668.js"><link rel="prefetch" href="/x14n-blog/assets/js/37.17c601a5.js"><link rel="prefetch" href="/x14n-blog/assets/js/38.62b174a4.js"><link rel="prefetch" href="/x14n-blog/assets/js/39.6bac3f2d.js"><link rel="prefetch" href="/x14n-blog/assets/js/4.afe772ca.js"><link rel="prefetch" href="/x14n-blog/assets/js/40.9b7689f4.js"><link rel="prefetch" href="/x14n-blog/assets/js/41.71a9acde.js"><link rel="prefetch" href="/x14n-blog/assets/js/42.6baf99f1.js"><link rel="prefetch" href="/x14n-blog/assets/js/43.57ecda17.js"><link rel="prefetch" href="/x14n-blog/assets/js/44.4d583ca3.js"><link rel="prefetch" href="/x14n-blog/assets/js/45.ea6eb053.js"><link rel="prefetch" href="/x14n-blog/assets/js/46.bc05fd53.js"><link rel="prefetch" href="/x14n-blog/assets/js/47.0fd2464d.js"><link rel="prefetch" href="/x14n-blog/assets/js/48.2975a75b.js"><link rel="prefetch" href="/x14n-blog/assets/js/49.26cad6d0.js"><link rel="prefetch" href="/x14n-blog/assets/js/5.9fe33567.js"><link rel="prefetch" href="/x14n-blog/assets/js/50.57500091.js"><link rel="prefetch" href="/x14n-blog/assets/js/51.f5dbef1f.js"><link rel="prefetch" href="/x14n-blog/assets/js/52.e7d420ca.js"><link rel="prefetch" href="/x14n-blog/assets/js/53.0879498a.js"><link rel="prefetch" href="/x14n-blog/assets/js/54.895bb4c8.js"><link rel="prefetch" href="/x14n-blog/assets/js/55.d59355f6.js"><link rel="prefetch" href="/x14n-blog/assets/js/56.5e5b07d2.js"><link rel="prefetch" href="/x14n-blog/assets/js/57.081c5d83.js"><link rel="prefetch" href="/x14n-blog/assets/js/58.7ad565b8.js"><link rel="prefetch" href="/x14n-blog/assets/js/59.1d98445b.js"><link rel="prefetch" href="/x14n-blog/assets/js/6.269dc953.js"><link rel="prefetch" href="/x14n-blog/assets/js/60.0dbd0de1.js"><link rel="prefetch" href="/x14n-blog/assets/js/61.055e152a.js"><link rel="prefetch" href="/x14n-blog/assets/js/62.75ea8725.js"><link rel="prefetch" href="/x14n-blog/assets/js/63.aa769f87.js"><link rel="prefetch" href="/x14n-blog/assets/js/64.6108248c.js"><link rel="prefetch" href="/x14n-blog/assets/js/65.ccb1e39b.js"><link rel="prefetch" href="/x14n-blog/assets/js/66.b1045178.js"><link rel="prefetch" href="/x14n-blog/assets/js/67.4d1253cd.js"><link rel="prefetch" href="/x14n-blog/assets/js/68.fb3c884b.js"><link rel="prefetch" href="/x14n-blog/assets/js/69.028eae9e.js"><link rel="prefetch" href="/x14n-blog/assets/js/70.d2879234.js"><link rel="prefetch" href="/x14n-blog/assets/js/71.319d9b8b.js"><link rel="prefetch" href="/x14n-blog/assets/js/72.05f2fbd9.js"><link rel="prefetch" href="/x14n-blog/assets/js/73.14e4ad11.js"><link rel="prefetch" href="/x14n-blog/assets/js/74.48c9a3e7.js"><link rel="prefetch" href="/x14n-blog/assets/js/75.e616032b.js"><link rel="prefetch" href="/x14n-blog/assets/js/76.61b598b4.js"><link rel="prefetch" href="/x14n-blog/assets/js/77.0af3c7a6.js"><link rel="prefetch" href="/x14n-blog/assets/js/78.3101f2e5.js"><link rel="prefetch" href="/x14n-blog/assets/js/79.88317f3c.js"><link rel="prefetch" href="/x14n-blog/assets/js/8.fa1c2b35.js"><link rel="prefetch" href="/x14n-blog/assets/js/9.e2c14be6.js"><link rel="prefetch" href="/x14n-blog/assets/js/vendors~docsearch.0bf5d0c2.js">
    <link rel="stylesheet" href="/x14n-blog/assets/css/0.styles.c5be36f0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>x14n</h3> <p class="description" data-v-59e6cb88>STAY HUNGER,STAY FOOLISH</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>x14n</span>
          
        <span data-v-59e6cb88>2021 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/x14n-blog/" class="home-link router-link-active"><img src="/x14n-blog/lp.png" alt="x14n" class="logo"> <span class="site-name">x14n</span></a> <div class="links"><!----> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/x14n-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/linux/" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/go/" class="nav-link"><i class="undefined"></i>
  go
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/java/" class="nav-link"><i class="undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/other/" class="nav-link"><i class="undefined"></i>
  other
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/spring/" class="nav-link"><i class="undefined"></i>
  spring
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/分布式/" class="nav-link"><i class="undefined"></i>
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/springboot/" class="nav-link"><i class="undefined"></i>
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/缓存/" class="nav-link"><i class="undefined"></i>
  缓存
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/工具/" class="nav-link"><i class="undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li></ul></div></div><div class="nav-item"><a href="/x14n-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/x14n-blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="https://github.com/XianCH" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/x14n-blog/lp.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    x14n
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>39</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>32</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/x14n-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/linux/" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/go/" class="nav-link"><i class="undefined"></i>
  go
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/java/" class="nav-link"><i class="undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/other/" class="nav-link"><i class="undefined"></i>
  other
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/spring/" class="nav-link"><i class="undefined"></i>
  spring
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/分布式/" class="nav-link"><i class="undefined"></i>
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/springboot/" class="nav-link"><i class="undefined"></i>
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/缓存/" class="nav-link"><i class="undefined"></i>
  缓存
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/工具/" class="nav-link"><i class="undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/x14n-blog/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li></ul></div></div><div class="nav-item"><a href="/x14n-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/x14n-blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="https://github.com/XianCH" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>redi常用命令总结</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>x14n</span>
          
        <span data-v-59e6cb88>2021 - </span>
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">redi常用命令总结</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>x14n</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>5/30/2023</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>缓存</span><span class="tag-item" data-v-8a445198>redis</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="_1-redis常用的5种数据类型"><a href="#_1-redis常用的5种数据类型" class="header-anchor">#</a> 1 Redis常用的5种数据类型</h1> <ul><li>String（字符串）</li> <li>List（列表）</li> <li>Hash（字典）</li> <li>Set（集合）</li> <li>Sorted Set（有序集合）</li></ul> <h1 id="_2-string"><a href="#_2-string" class="header-anchor">#</a> 2 String</h1> <p>String是简单的key-value 键值对，value不仅可以是String，也可以是数字。String在<a href="https://cloud.tencent.com/product/crs?from_column=20065&amp;from=20065" target="_blank" rel="noopener noreferrer">redis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>内部存储默认就是一个字符串，被redisObject所引用，当遇到incr,decr等操作时会转成数值型进行计算，此时redisObject的encoding字段为int。</p> <p>String在redis内部存储默认就是一个字符串，被redisObject所引用，当遇到incr,decr等操作时会转成数值型进行计算，此时redisObject的encoding字段为int。</p> <h2 id="_2-1-应用场景"><a href="#_2-1-应用场景" class="header-anchor">#</a> 2.1 应用场景</h2> <p>String是最常用的一种数据类型，普通的key/value存储都可以归为此类，这里就不所做解释了。</p> <h2 id="_2-2-相关命令"><a href="#_2-2-相关命令" class="header-anchor">#</a> 2.2 相关命令</h2> <table><thead><tr><th style="text-align:left;">命令</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">SET key value</td> <td style="text-align:left;">设置key=value</td></tr> <tr><td style="text-align:left;">GET key</td> <td style="text-align:left;">或者键key对应的值</td></tr> <tr><td style="text-align:left;">GETRANGE key start end</td> <td style="text-align:left;">得到字符串的子字符串存放在一个键</td></tr> <tr><td style="text-align:left;">GETSET key value</td> <td style="text-align:left;">设置键的字符串值，并返回旧值</td></tr> <tr><td style="text-align:left;">GETBIT key offset</td> <td style="text-align:left;">返回存储在键位值的字符串值的偏移</td></tr> <tr><td style="text-align:left;">MGET key1 key2..</td> <td style="text-align:left;">得到所有的给定键的值</td></tr> <tr><td style="text-align:left;">SETBIT key offset value</td> <td style="text-align:left;">设置或清除该位在存储在键的字符串值偏移</td></tr> <tr><td style="text-align:left;">SETEX key seconds value</td> <td style="text-align:left;">键到期时设置值</td></tr> <tr><td style="text-align:left;">SETNX key value</td> <td style="text-align:left;">设置键的值，只有当该键不存在</td></tr> <tr><td style="text-align:left;">SETRANGE key offset value</td> <td style="text-align:left;">覆盖字符串的一部分从指定键的偏移</td></tr> <tr><td style="text-align:left;">STRLEN key</td> <td style="text-align:left;">得到存储在键的值的长度</td></tr> <tr><td style="text-align:left;">MSET key value key value...</td> <td style="text-align:left;">设置多个键和多个值</td></tr> <tr><td style="text-align:left;">MSETNX key value key value...</td> <td style="text-align:left;">设置多个键多个值，只有在当没有按键的存在时</td></tr> <tr><td style="text-align:left;">PSETEX key milliseconds value</td> <td style="text-align:left;">设置键的毫秒值和到期时间</td></tr> <tr><td style="text-align:left;">INCR key</td> <td style="text-align:left;">增加键的整数值一次</td></tr> <tr><td style="text-align:left;">INCRBY key increment</td> <td style="text-align:left;">由给定的数量递增键的整数值</td></tr> <tr><td style="text-align:left;">INCRBYFLOAT key increment</td> <td style="text-align:left;">由给定的数量递增键的浮点值</td></tr> <tr><td style="text-align:left;">DECR key</td> <td style="text-align:left;">递减键一次的整数值</td></tr> <tr><td style="text-align:left;">DECRBY key decrement</td> <td style="text-align:left;">由给定数目递减键的整数值</td></tr> <tr><td style="text-align:left;">APPEND key value</td> <td style="text-align:left;">追加值到一个键</td></tr> <tr><td style="text-align:left;">DEL key</td> <td style="text-align:left;">如果存在删除键</td></tr> <tr><td style="text-align:left;">DUMP key</td> <td style="text-align:left;">返回存储在指定键的值的序列化版本</td></tr> <tr><td style="text-align:left;">EXISTS key</td> <td style="text-align:left;">此命令检查该键是否存在</td></tr> <tr><td style="text-align:left;">EXPIRE key seconds</td> <td style="text-align:left;">指定键的过期时间</td></tr> <tr><td style="text-align:left;">EXPIREAT key timestamp</td> <td style="text-align:left;">指定的键过期时间。在这里，时间是在Unix时间戳格式</td></tr> <tr><td style="text-align:left;">PEXPIRE key milliseconds</td> <td style="text-align:left;">设置键以毫秒为单位到期</td></tr> <tr><td style="text-align:left;">PEXPIREAT key milliseconds-timestamp</td> <td style="text-align:left;">设置键在Unix时间戳指定为毫秒到期</td></tr> <tr><td style="text-align:left;">KEYS pattern</td> <td style="text-align:left;">查找与指定模式匹配的所有键</td></tr> <tr><td style="text-align:left;">MOVE key db</td> <td style="text-align:left;">移动键到另一个数据库</td></tr> <tr><td style="text-align:left;">PERSIST key</td> <td style="text-align:left;">移除过期的键</td></tr> <tr><td style="text-align:left;">PTTL key</td> <td style="text-align:left;">以毫秒为单位获取剩余时间的到期键。</td></tr> <tr><td style="text-align:left;">TTL key</td> <td style="text-align:left;">获取键到期的剩余时间。</td></tr> <tr><td style="text-align:left;">RANDOMKEY</td> <td style="text-align:left;">从Redis返回随机键</td></tr> <tr><td style="text-align:left;">RENAME key newkey</td> <td style="text-align:left;">更改键的名称</td></tr> <tr><td style="text-align:left;">RENAMENX key newkey</td> <td style="text-align:left;">重命名键，如果新的键不存在</td></tr> <tr><td style="text-align:left;">TYPE key</td> <td style="text-align:left;">返回存储在键的数据类型的值。</td></tr></tbody></table> <h1 id="_2-3-使用示例"><a href="#_2-3-使用示例" class="header-anchor">#</a> 2.3 使用示例</h1> <div class="language-js extra-class"><pre class="language-js"><code>redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">set</span> baidu http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>baidu
<span class="token constant">OK</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> append baidu <span class="token punctuation">.</span><span class="token function">com</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">20</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">get</span> baidu
<span class="token string">&quot;http://www.baidu.com&quot;</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">set</span> visitors <span class="token number">0</span>
<span class="token constant">OK</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> incr <span class="token function">visitors</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> incr <span class="token function">visitors</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">get</span> visitors
<span class="token string">&quot;2&quot;</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> incrby visitors <span class="token number">100</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">102</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">get</span> visitors
<span class="token string">&quot;102&quot;</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> type baidu
string
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> type visitors
string
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> ttl <span class="token function">baidu</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> rename baidu baidu<span class="token operator">-</span>site
<span class="token constant">OK</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">get</span> <span class="token function">baidu</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> <span class="token keyword">get</span> baidu<span class="token operator">-</span>site
<span class="token string">&quot;http://www.baidu.com&quot;</span>
</code></pre></div><h1 id="_3-list"><a href="#_3-list" class="header-anchor">#</a> 3 List</h1> <p>Redis列表是简单的字符串列表，可以类比到C++中的std::list，简单的说就是一个链表或者说是一个队列。可以从头部或尾部向Redis列表添加元素。列表的最大长度为2^32 - 1，也即每个列表支持超过40亿个元素。</p> <p>Redis list的实现为一个双向链表，即可以支持反向查找和遍历，更方便操作，不过带来了部分额外的内存开销，Redis内部的很多实现，包括发送缓冲队列等也都是用的这个数据结构。</p> <h2 id="_3-1-应用场景"><a href="#_3-1-应用场景" class="header-anchor">#</a> 3.1 应用场景</h2> <p>Redis list的应用场景非常多，也是Redis最重要的数据结构之一，比如twitter的关注列表、粉丝列表等都可以用Redis的list结构来实现，再比如有的应用使用Redis的list类型实现一个简单的轻量级<a href="https://cloud.tencent.com/product/cmq?from_column=20065&amp;from=20065" target="_blank" rel="noopener noreferrer">消息队列<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，生产者push，消费者pop/bpop。</p> <h2 id="_3-2-相关命令"><a href="#_3-2-相关命令" class="header-anchor">#</a> 3.2 相关命令</h2> <table><thead><tr><th style="text-align:left;">命令</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">BLPOP key1 key2  timeout</td> <td style="text-align:left;">取出并获取列表中的第一个元素，或阻塞，直到有可用</td></tr> <tr><td style="text-align:left;">BRPOP key1 key2  timeout</td> <td style="text-align:left;">取出并获取列表中的最后一个元素，或阻塞，直到有可用</td></tr> <tr><td style="text-align:left;">BRPOPLPUSH source destination timeout</td> <td style="text-align:left;">从列表中弹出一个值，它推到另一个列表并返回它;或阻塞，直到有可用</td></tr> <tr><td style="text-align:left;">LINDEX key index</td> <td style="text-align:left;">从一个列表其索引获取对应的元素</td></tr> <tr><td style="text-align:left;">LINSERT key BEFORE/AFTER pivot value</td> <td style="text-align:left;">在列表中的其他元素之后或之前插入一个元素</td></tr> <tr><td style="text-align:left;">LLEN key</td> <td style="text-align:left;">获取列表的长度</td></tr> <tr><td style="text-align:left;">LPOP key</td> <td style="text-align:left;">获取并取出列表中的第一个元素</td></tr> <tr><td style="text-align:left;">LPUSH key value1 value2</td> <td style="text-align:left;">在前面加上一个或多个值的列表</td></tr> <tr><td style="text-align:left;">LPUSHX key value</td> <td style="text-align:left;">在前面加上一个值列表，仅当列表中存在</td></tr> <tr><td style="text-align:left;">LRANGE key start stop</td> <td style="text-align:left;">从一个列表获取各种元素</td></tr> <tr><td style="text-align:left;">LREM key count value</td> <td style="text-align:left;">从列表中删除元素</td></tr> <tr><td style="text-align:left;">LSET key index value</td> <td style="text-align:left;">在列表中的索引设置一个元素的值</td></tr> <tr><td style="text-align:left;">LTRIM key start stop</td> <td style="text-align:left;">修剪列表到指定的范围内</td></tr> <tr><td style="text-align:left;">RPOP key</td> <td style="text-align:left;">取出并获取列表中的最后一个元素</td></tr> <tr><td style="text-align:left;">RPOPLPUSH source destination</td> <td style="text-align:left;">删除最后一个元素的列表，将其附加到另一个列表并返回它</td></tr> <tr><td style="text-align:left;">RPUSH key value1 value2</td> <td style="text-align:left;">添加一个或多个值到列表</td></tr> <tr><td style="text-align:left;">RPUSHX key value</td> <td style="text-align:left;">添加一个值列表，仅当列表中存在</td></tr></tbody></table> <h2 id="_3-3-使用示例"><a href="#_3-3-使用示例" class="header-anchor">#</a> 3.3 使用示例</h2> <div class="language-js extra-class"><pre class="language-js"><code>redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> lpush list1 <span class="token function">redis</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> lpush list1 <span class="token function">hello</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> rpush list1 <span class="token function">world</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> llen <span class="token function">list1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> lrange list1 <span class="token number">0</span> <span class="token number">3</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;redis&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> lpop list1
<span class="token string">&quot;hello&quot;</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> rpop list1
<span class="token string">&quot;world&quot;</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> lrange list1 <span class="token number">0</span> <span class="token number">3</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;redis&quot;</span>
</code></pre></div><h1 id="_4-hash"><a href="#_4-hash" class="header-anchor">#</a> 4 Hash</h1> <p>类似C#中的dict类型或者C++中的hash_map类型。</p> <p>Redis Hash对应Value内部实际就是一个HashMap，实际这里会有2种不同实现，这个Hash的成员比较少时Redis为了节省内存会采用类似一维数组的方式来紧凑存储，而不会采用真正的HashMap结构，对应的value redisObject的encoding为zipmap,当成员数量增大时会自动转成真正的HashMap,此时encoding为ht。</p> <h2 id="_4-1-应用场景"><a href="#_4-1-应用场景" class="header-anchor">#</a> 4.1 应用场景</h2> <p>假设有多个用户及对应的用户信息，可以用来存储以用户ID为key，将用户信息序列化为比如json格式做为value进行保存。</p> <h2 id="_4-2-相关命令"><a href="#_4-2-相关命令" class="header-anchor">#</a> 4.2 相关命令</h2> <table><thead><tr><th style="text-align:left;">命令</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">HDEL key fieldfield...</td> <td style="text-align:left;">删除对象的一个或几个属性域，不存在的属性将被忽略</td></tr> <tr><td style="text-align:left;">HEXISTS key field</td> <td style="text-align:left;">查看对象是否存在该属性域</td></tr> <tr><td style="text-align:left;">HGET key field</td> <td style="text-align:left;">获取对象中该field属性域的值</td></tr> <tr><td style="text-align:left;">HGETALL key</td> <td style="text-align:left;">获取对象的所有属性域和值</td></tr> <tr><td style="text-align:left;">HINCRBY key field value</td> <td style="text-align:left;">将该对象中指定域的值增加给定的value，原子自增操作，只能是integer的属性值可以使用</td></tr> <tr><td style="text-align:left;">HINCRBYFLOAT key field increment</td> <td style="text-align:left;">将该对象中指定域的值增加给定的浮点数</td></tr> <tr><td style="text-align:left;">HKEYS key</td> <td style="text-align:left;">获取对象的所有属性字段</td></tr> <tr><td style="text-align:left;">HVALS key</td> <td style="text-align:left;">获取对象的所有属性值</td></tr> <tr><td style="text-align:left;">HLEN key</td> <td style="text-align:left;">获取对象的所有属性字段的总数</td></tr> <tr><td style="text-align:left;">HMGET key fieldfield...</td> <td style="text-align:left;">获取对象的一个或多个指定字段的值</td></tr> <tr><td style="text-align:left;">HSET key field value</td> <td style="text-align:left;">设置对象指定字段的值</td></tr> <tr><td style="text-align:left;">HMSET key field value field value ...</td> <td style="text-align:left;">同时设置对象中一个或多个字段的值</td></tr> <tr><td style="text-align:left;">HSETNX key field value</td> <td style="text-align:left;">只在对象不存在指定的字段时才设置字段的值</td></tr> <tr><td style="text-align:left;">HSTRLEN key field</td> <td style="text-align:left;">返回对象指定field的value的字符串长度，如果该对象或者field不存在，返回0.</td></tr> <tr><td style="text-align:left;">HSCAN key cursor MATCH pattern</td> <td style="text-align:left;">类似SCAN命令</td></tr></tbody></table> <h2 id="_4-3-使用示例"><a href="#_4-3-使用示例" class="header-anchor">#</a> 4.3 使用示例</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> hset person name <span class="token function">jack</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> hset person age <span class="token number">20</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> hset person sex <span class="token function">famale</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> hgetall person
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;jack&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;20&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;sex&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;famale&quot;</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> hkeys person
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;sex&quot;</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> hvals person
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;jack&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;20&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;famale&quot;</span>
</code></pre></div><h1 id="_5-set"><a href="#_5-set" class="header-anchor">#</a> 5 Set</h1> <p>可以理解为一堆值不重复的列表，类似数学领域中的集合概念，且Redis也提供了针对集合的求交集、并集、差集等操作。</p> <p>set 的内部实现是一个value永远为null的HashMap，实际就是通过计算hash的方式来快速排重的，这也是set能提供判断一个成员是否在集合内的原因。</p> <h2 id="_5-1-应用场景"><a href="#_5-1-应用场景" class="header-anchor">#</a> 5.1 应用场景</h2> <p>Redis set对外提供的功能与list类似是一个列表的功能，特殊之处在于set是可以自动排重的，当你需要存储一个列表数据，又不希望出现重复数据时，set是一个很好的选择，并且set提供了判断某个成员是否在一个set集合内的重要接口，这个也是list所不能提供的。</p> <p>又或者在微博应用中，每个用户关注的人存在一个集合中，就很容易实现求两个人的共同好友功能。</p> <h2 id="_5-2-相关命令"><a href="#_5-2-相关命令" class="header-anchor">#</a> 5.2 相关命令</h2> <table><thead><tr><th style="text-align:left;">命令</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">SADD key member member ...</td> <td style="text-align:left;">添加一个或者多个元素到集合(set)里</td></tr> <tr><td style="text-align:left;">SCARD key</td> <td style="text-align:left;">获取集合里面的元素数量</td></tr> <tr><td style="text-align:left;">SDIFF key key ...</td> <td style="text-align:left;">获得队列不存在的元素</td></tr> <tr><td style="text-align:left;">SDIFFSTORE destination key key ...</td> <td style="text-align:left;">获得队列不存在的元素，并存储在一个关键的结果集</td></tr> <tr><td style="text-align:left;">SINTER key key ...</td> <td style="text-align:left;">获得两个集合的交集</td></tr> <tr><td style="text-align:left;">SINTERSTORE destination key key ...</td> <td style="text-align:left;">获得两个集合的交集，并存储在一个集合中</td></tr> <tr><td style="text-align:left;">SISMEMBER key member</td> <td style="text-align:left;">确定一个给定的值是一个集合的成员</td></tr> <tr><td style="text-align:left;">SMEMBERS key</td> <td style="text-align:left;">获取集合里面的所有key</td></tr> <tr><td style="text-align:left;">SMOVE source destination member</td> <td style="text-align:left;">移动集合里面的一个key到另一个集合</td></tr> <tr><td style="text-align:left;">SPOP key count</td> <td style="text-align:left;">获取并删除一个集合里面的元素</td></tr> <tr><td style="text-align:left;">SRANDMEMBER key count</td> <td style="text-align:left;">从集合里面随机获取一个元素</td></tr> <tr><td style="text-align:left;">SREM key member member ...</td> <td style="text-align:left;">从集合里删除一个或多个元素，不存在的元素会被忽略</td></tr> <tr><td style="text-align:left;">SUNION key key ...</td> <td style="text-align:left;">添加多个set元素</td></tr> <tr><td style="text-align:left;">SUNIONSTORE destination key key ...</td> <td style="text-align:left;">合并set元素，并将结果存入新的set里面</td></tr> <tr><td style="text-align:left;">SSCAN key cursor MATCH pattern</td> <td style="text-align:left;">迭代set里面的元素</td></tr></tbody></table> <h2 id="_5-3-使用示例"><a href="#_5-3-使用示例" class="header-anchor">#</a> 5.3 使用示例</h2> <div class="language-js extra-class"><pre class="language-js"><code>redis<span class="token operator">&gt;</span> <span class="token constant">SADD</span> myset <span class="token string">&quot;Hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> <span class="token constant">SADD</span> myset <span class="token string">&quot;World&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> <span class="token constant">SMEMBERS</span> myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;World&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;Hello&quot;</span>
redis<span class="token operator">&gt;</span> <span class="token constant">SADD</span> myset <span class="token string">&quot;one&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> <span class="token constant">SISMEMBER</span> myset <span class="token string">&quot;one&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> <span class="token constant">SISMEMBER</span> myset <span class="token string">&quot;two&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
#使用集合数据结构的典型用例是朋友名单的实现：
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> sadd friends<span class="token operator">:</span>leto ghanima paul chani <span class="token function">jessica</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> sadd friends<span class="token operator">:</span>duncan paul jessica <span class="token function">alia</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> sismember friends<span class="token operator">:</span>leto <span class="token function">jessica</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>   #不管一个用户有多少个朋友，我们都能高效地（<span class="token constant">O</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>时间复杂度）识别出用户<span class="token constant">X</span>是不是用户<span class="token constant">Y</span>的朋友
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> sismember friends<span class="token operator">:</span>leto <span class="token function">vladimir</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> sinter friends<span class="token operator">:</span>leto friends<span class="token operator">:</span>duncan	#我们可以查看两个或更多的人是不是有共同的朋友
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;paul&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;jessica&quot;</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> sinterstore friends<span class="token operator">:</span>leto_duncan friends<span class="token operator">:</span>leto friends<span class="token operator">:</span>duncan # <span class="token function">可以在一个新的关键字里存储结果</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre></div><h1 id="_6-sorted-set"><a href="#_6-sorted-set" class="header-anchor">#</a> 6 Sorted Set</h1> <p>Redis有序集合类似Redis集合，不同的是增加了一个功能，即集合是有序的。一个有序集合的每个成员带有分数，用于进行排序。</p> <p>Redis有序集合添加、删除和测试的时间复杂度均为O(1)(固定时间，无论里面包含的元素集合的数量)。列表的最大长度为2^32- 1元素(4294967295，超过40亿每个元素的集合)。</p> <p>Redis sorted set的内部使用HashMap和跳跃表(SkipList)来保证数据的存储和有序，HashMap里放的是成员到score的映射，而跳跃表里存放的是所有的成员，排序依据是HashMap里存的score,使用跳跃表的结构可以获得比较高的查找效率，并且在实现上比较简单。</p> <h2 id="_6-1-使用场景"><a href="#_6-1-使用场景" class="header-anchor">#</a> 6.1 使用场景</h2> <p>Redis sorted set的使用场景与set类似，区别是set不是自动有序的，而sorted set可以通过用户额外提供一个优先级(score)的参数来为成员排序，并且是插入有序的，即自动排序。当你需要一个有序的并且不重复的集合列表，那么可以选择sorted set数据结构，比如twitter 的public timeline可以以发表时间作为score来存储，这样获取时就是自动按时间排好序的。</p> <p>又比如用户的积分排行榜需求就可以通过有序集合实现。还有上面介绍的使用List实现轻量级的消息队列，其实也可以通过Sorted Set实现有优先级或按权重的队列。</p> <h2 id="_6-2-相关命令"><a href="#_6-2-相关命令" class="header-anchor">#</a> 6.2 相关命令</h2> <table><thead><tr><th style="text-align:left;">命令</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">ZADD key score1 member1 score2 member2</td> <td style="text-align:left;">添加一个或多个成员到有序集合，或者如果它已经存在更新其分数</td></tr> <tr><td style="text-align:left;">ZCARD key</td> <td style="text-align:left;">得到的有序集合成员的数量</td></tr> <tr><td style="text-align:left;">ZCOUNT key min max</td> <td style="text-align:left;">计算一个有序集合成员与给定值范围内的分数</td></tr> <tr><td style="text-align:left;">ZINCRBY key increment member</td> <td style="text-align:left;">在有序集合增加成员的分数</td></tr> <tr><td style="text-align:left;">ZINTERSTORE destination numkeys key key ...</td> <td style="text-align:left;">多重交叉排序集合，并存储生成一个新的键有序集合</td></tr> <tr><td style="text-align:left;">ZLEXCOUNT key min max</td> <td style="text-align:left;">计算一个给定的字典范围之间的有序集合成员的数量</td></tr> <tr><td style="text-align:left;">ZRANGE key start stop WITHSCORES</td> <td style="text-align:left;">由索引返回一个成员范围的有序集合（从低到高）</td></tr> <tr><td style="text-align:left;">ZRANGEBYLEX key min max LIMIT offset count</td> <td style="text-align:left;">返回一个成员范围的有序集合（由字典范围）</td></tr> <tr><td style="text-align:left;">ZRANGEBYSCORE key min max WITHSCORES</td> <td style="text-align:left;">返回有序集key中，所有 score 值介于 min 和 max 之间(包括等于 min 或 max )的成员，有序集成员按 score 值递增(从小到大)次序排列</td></tr> <tr><td style="text-align:left;">ZRANK key member</td> <td style="text-align:left;">确定成员的索引中有序集合</td></tr> <tr><td style="text-align:left;">ZREM key member member ...</td> <td style="text-align:left;">从有序集合中删除一个或多个成员，不存在的成员将被忽略</td></tr> <tr><td style="text-align:left;">ZREMRANGEBYLEX key min max</td> <td style="text-align:left;">删除所有成员在给定的字典范围之间的有序集合</td></tr> <tr><td style="text-align:left;">ZREMRANGEBYRANK key start stop</td> <td style="text-align:left;">在给定的索引之内删除所有成员的有序集合</td></tr> <tr><td style="text-align:left;">ZREMRANGEBYSCORE key min max</td> <td style="text-align:left;">在给定的分数之内删除所有成员的有序集合</td></tr> <tr><td style="text-align:left;">ZREVRANGE key start stop WITHSCORES</td> <td style="text-align:left;">返回一个成员范围的有序集合，通过索引，以分数排序，从高分到低分</td></tr> <tr><td style="text-align:left;">ZREVRANGEBYSCORE key max min WITHSCORES</td> <td style="text-align:left;">返回一个成员范围的有序集合，以socre排序从高到低</td></tr> <tr><td style="text-align:left;">ZREVRANK key member</td> <td style="text-align:left;">确定一个有序集合成员的索引，以分数排序，从高分到低分</td></tr> <tr><td style="text-align:left;">ZSCORE key member</td> <td style="text-align:left;">获取给定成员相关联的分数在一个有序集合</td></tr> <tr><td style="text-align:left;">ZUNIONSTORE destination numkeys key key ...</td> <td style="text-align:left;">添加多个集排序，所得排序集合存储在一个新的键</td></tr> <tr><td style="text-align:left;">ZSCAN key cursor MATCH pattern</td> <td style="text-align:left;">增量迭代排序元素集和相关的分数</td></tr></tbody></table> <h2 id="_6-3-使用示例"><a href="#_6-3-使用示例" class="header-anchor">#</a> 6.3 使用示例</h2> <div class="language-js extra-class"><pre class="language-js"><code>redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> zadd dbs <span class="token number">100</span> <span class="token function">redis</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> zadd dbs <span class="token number">98</span> <span class="token function">memcached</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> zadd dbs <span class="token number">99</span> <span class="token function">mongodb</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> zadd dbs <span class="token number">99</span> <span class="token function">leveldb</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> zcard <span class="token function">dbs</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> zcount dbs <span class="token number">10</span> <span class="token number">99</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> zrank dbs <span class="token function">leveldb</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> zrank dbs <span class="token function">other</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
redis <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">&gt;</span> zrangebyscore dbs <span class="token number">98</span> <span class="token number">100</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;memcached&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;leveldb&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;mongodb&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;redis&quot;</span>
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_2-1-应用场景" class="sidebar-link reco-side-_2-1-应用场景" data-v-b57cc07c>2.1 应用场景</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_2-2-相关命令" class="sidebar-link reco-side-_2-2-相关命令" data-v-b57cc07c>2.2 相关命令</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_3-1-应用场景" class="sidebar-link reco-side-_3-1-应用场景" data-v-b57cc07c>3.1 应用场景</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_3-2-相关命令" class="sidebar-link reco-side-_3-2-相关命令" data-v-b57cc07c>3.2 相关命令</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_3-3-使用示例" class="sidebar-link reco-side-_3-3-使用示例" data-v-b57cc07c>3.3 使用示例</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_4-1-应用场景" class="sidebar-link reco-side-_4-1-应用场景" data-v-b57cc07c>4.1 应用场景</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_4-2-相关命令" class="sidebar-link reco-side-_4-2-相关命令" data-v-b57cc07c>4.2 相关命令</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_4-3-使用示例" class="sidebar-link reco-side-_4-3-使用示例" data-v-b57cc07c>4.3 使用示例</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_5-1-应用场景" class="sidebar-link reco-side-_5-1-应用场景" data-v-b57cc07c>5.1 应用场景</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_5-2-相关命令" class="sidebar-link reco-side-_5-2-相关命令" data-v-b57cc07c>5.2 相关命令</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_5-3-使用示例" class="sidebar-link reco-side-_5-3-使用示例" data-v-b57cc07c>5.3 使用示例</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_6-1-使用场景" class="sidebar-link reco-side-_6-1-使用场景" data-v-b57cc07c>6.1 使用场景</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_6-2-相关命令" class="sidebar-link reco-side-_6-2-相关命令" data-v-b57cc07c>6.2 相关命令</a></li><li class="level-2" data-v-b57cc07c><a href="/x14n-blog/views/xue-xi/huan-cun/redischang-yong-ming-ling.html#_6-3-使用示例" class="sidebar-link reco-side-_6-3-使用示例" data-v-b57cc07c>6.3 使用示例</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/x14n-blog/assets/js/app.0bf6b832.js" defer></script><script src="/x14n-blog/assets/js/7.5ae92d3c.js" defer></script><script src="/x14n-blog/assets/js/2.f34688e4.js" defer></script><script src="/x14n-blog/assets/js/1.8dfff511.js" defer></script><script src="/x14n-blog/assets/js/80.a1c43ff4.js" defer></script>
  </body>
</html>
